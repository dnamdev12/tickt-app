{"version":3,"sources":["assets/images/add-image.png","assets/images/add-document.png","common/DocViewer.js","pages/tradieInfo/voucherDetail.tsx","pages/tradieInfo/addVoucher.tsx","assets/images/ic-template.png","pages/tradieInfo/vouchers.tsx"],"names":["DocViewerComponent","src","width","height","isHeader","splitElements","split","extension","length","window","screen","pluginRenderers","DocViewerRenderers","documents","uri","fileType","style","paddingTop","theme","disableThemeScrollbar","config","header","disableHeader","disableFileName","retainURLParams","className","VoucherDetail","props","toggleProps","item","closeToggle","useState","toggleRecommendation","setToggleRecommendation","useEffect","recommendation","console","log","data","open","onClose","prev","onClick","cancel","alt","jobName","tradieName","docformats","AddVoucherComponent","toggle","setToggle","jobsList","setJobsList","label","value","reactSelect","setReactSelect","jobDescription","setJobDesciption","name","detail","upload","errorData","setErrorData","filesUrl","setFilesUrl","setLocalFiles","update","forceUpdate","setToggler","setSelectSlide","prefetch","a","id","fetchVouchesJobs","page","tradieId","res_jobs","success","list_data","onFileChange","e","formData","FormData","newFile","target","files","type","toLowerCase","selectedFileSize","size","indexOf","setShowToast","includes","append","onFileUpload","res","link","imgUrl","mediaType","URL","createObjectURL","renderbyFileFormat","index","split_item_format","get_split_fromat","split_item_name","get_split_name","image_render","setItemToggle","title","docThumbnail","splice","Array","isArray","removeFromItem","close","handleSubmit","jobId","photos","vouchDescription","AddVoucher","response","moengage","moE_SendEvent","MoEConstants","LEFT_VOUCHER","timeStamp","getCurrentTimeStamp","mixPanel","mixP_SendEvent","JobSelectOptions","map","unshift","options","components","NoOptionsMessage","onChange","trimLeft","placeholder","Fragment","htmlFor","addMedia","accept","display","withRouter","stateData","setStateData","isTrue","setSelectedItem","currentPage","setCurrentPage","hasMore","setHasMore","location","state","path","search","URLSearchParams","get","isRecall","getVouchers","res_profile","completeItems","voucher","state_data","storageService","getItem","history","push","dataLength","next","cp","loader","builderImage","dummy","onError","onerror","builderName","date","vouch","preventDefault"],"mappings":"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","file":"static/js/21.84964c79.chunk.js","sourcesContent":["export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGYAAABmCAYAAAA53+RiAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAU8SURBVHgB7Z3PbhtVFMa/OzNNGoKEVVYJjZS+AATYdcN03S7ChjR00fAEyRNAyhO4T0C6aUQ3BAnWHTbZUQIvUKOmhQ3ISCTOn3pu75n4ps547NRq7Pksn5800ujad64939x77r9zxqDFdPxoIcXL2MBUfJqFqTeS21XkkO9aNBfRhRTYOEiWa/n0d+LN9W55DFDbS5Y38unvxpuxu17cLd8EDqr15Kt6e1ol/q5yhMtr3fIEQPJ/spzk06fjzRULzHfLt58sr+fTLseb8+56K93yGKRbe8mdnXz6VPxw7ey9tnV3v7f8fQteX6BZCXr8KGWw5O+9EcXlpOgJV4aP0yMOkdYjA7sYBJlaa1BKJ4RZTBHWImnnbIo6FArE1jh7WwmgUKLCkBJJ1YFCg+qhKIqiKGOKkQlJOdlLvtiBUjpej6htlliFIcDroQNMUlQYUlQYUlQYUlQYUlQYUiLZOAGFBtVDURRFUcYU47etFm3/VIaP10PHMaSoMKSoMKSoMKSoMKSoMKRE4skFhQavh8EIYp+i0ryExTDEZ7BYaLnnebe5evbnLHaaFr+Ex9gy10bPzWSkhLF/OQEsVu2Jz2PlTfMZi42DI9ybujY6rcNICCM1BJP4xr6l15v7s1Uc4t4o1CB6YaSWWIvHuDjH3drhIW6w1x7qXtnRrrMfFyuKMD85icdybRBjxI9eTor83stkADUlD2XN8XoEEtygV4CDMhCbMmBRhKzmZPaLCK8HZ1PmDD2GEwxivlUWHXTCZE3YEGMOSFmNp3wRQSLw0fcTvP3r+/j+5w+y86Vbz3H9k3/6yY6JS9mDQBWAgqrGtGzLCvrk2d9TTpir2fHsxRT6xQS4y2ZrqISRaRaUQ6XEsguhEiab+yqrbFNe2UVEEu9LTvZRPq4ZK2/QZzgGnF6PKB+ErWTmz/vC9pMrHXZk+7crZz7P+lptzM02XIfgX/TCksRq83pQzZWlL3J3tIDVbz/MjHw/LN3cxf2v/zj3e8Esz/3QFUxS2MYxUo17dluXbu3i+qdnxynbT9w45qeTWiS1I//53EwDb1g2DZEE9pQTEltTc0dPI1xsK8ypMPL50s3n6BeWJXavR9QWbXUdJeN6Zb+bsnpHliPOgdeDysYEFglKQvYHgAgu43+MLZTU1ocnZdNAZfxlLb65iwdu7mq1n3xzM/uZ0c/OZ/sfKstmDbZ9AHSzy0GIqrM1fQkjBv+8AWQvZAcNyKAbx5gZ1GyK+xgSUhbjxgzKAWZwnPUQaxg8tVZZdETyAgKQIe29W8m8MaTNGFS2xetBva9Mthi5J+cHXLw4tZcpPp+4yhujTTf8kUI/iSmdAXOIjy+iQyDXkGuNwh7mkdtUnqZYd9M2d/vIVneCPDg6RlU3lQ8Y74bhBIrd8RFybhjuqJlRd8OQ1z/JSdFrqJTh4/WIWJZUlRO8HrqCSYoKQ4oKQ4oKQ4oKQ4oKoyiKoiiKwoC+nZwMr4es+a+00tahlI7XQ8cxpKgwpKgwpKgwpKgwpKgwpEQGIZVfyLijeiiKoijKmGKm4oeZX3kj+bIKpXS8Hq67bKgi2407Xg8dYJKiwpASWNi6Caw2ZyRIU2Zh6m4FM0pM2lRhSGjCZp2wU48yWWsOA7NqU/ufTxPlGsntjt7adPxowaLZNeqqvPq8aA+Bf/lmERKWqsh5SmLd9wpxLzEk8yG9JLRUW1SpDsRlu+hdBuI01MtfqOglrnLf2pbnOzBIt/aSOx3e0dL7au94mcC8Z1L7o/9dZ2xMmqZ/QikFufcW4ekD9gqSqNctyXDB6QAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGoAAABqCAYAAABUIcSXAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAOGSURBVHgB7dxPSBRhHMbx37ua5BqtB7M6uEGeAvXQrRYPRhAZgcegg3SJDgV2iIKKirpEhwq65MkOgbfqEgQigUmdglyhSwWthzKEVHLUrJnmnW1Lopb9M+++79M+HxAsUISvM/vsOLtKQsvLa5f8wB9SSlqFnBEEMq9EjSSTTaeVt/L1Zvg/Q0LOCnz/ilryVj/zSHKcCo8sb3k1EHJeQggCQ4FgKBAMBYKhQDAUCIYCwVAgGAoEQ4FgKBAMBYKhQDAUCIYCwVAgGAoEQ4FgKBCNYtnk1JzcuP9asu8WZHFpTUx5OXJAOtqTgspqqLsP38iF4azUmr/6TFRDWlRjWlBYO/XlZj0rkbTge07W5g5L8C0nKKyFujg8JTahxbIWSj822YYUy1qoBYPDoRwosTjPBSMWQ/3keiyGWsflWAz1B1djMdRfuBiLof7BtVgMVYRLseomVO6j9+vzho2Homt9pXAllvWr57UyOvZeMj1t+X8kUtK07ZUgqZsjanQs58Rlq0rV1WPU4NUX0ZGFyNqLrbf0PxBbMt1tsjc8DXa0t5T1demtyd+nzxqrm8eo9Sazc9FHuXSkTE+v2MB5DoKhQDAUCIYCwVAgIFbf5pYN0t2ZEhNQngQ7H6ojfO7y9M6+KJYJ028XpO/UuLjO+VNf/57txiJpXeGRinAHrfOhHj//ILlPnpiib6WeMfj94+L8qW9m1pOBsxOSNvBbr29Zmw5DIYAYEzqW/qhnnOcgOM85z+PBeZ7Hec55Hg99ajL5ggL9Oi3O8xjo+dx3ctzIPNeynOfx4TznPIfBec55Hg/T81yHGjg3Ia6r+3meiW4b4zyvGud5Huc553l8OM85z2HAzPPUpsoHxf9wNELM80fXe6taZigTvBiIeV7tfEaZ4MVAzPNqoUzwYiDm+e5jT6LXNFVK38mEDmaej87ivLeeCZznIBgKBEOBYCgQ1kKlDP7pwhSbP7O1UF07zfzF1qSD4ZNvW6yFOnN0lyDRl7KO7N8htlgLpS/rXDveIwgK1xttsvbOLQX6yez54anoUtGiI+/cXFA4ik4MdBq9HaAU1kNRaTjPQTAUCIYCwVAgGAoEQ4FgKBAMBYKhQDAUCIYCwVAgGAoEQ4FgKBAMBYKhQDAUCIYCkQgCmRdym5L5hCj/tpDTfD+4p/QnX7yVW0rUoFLSKuSM6GwXHkgtzc2XfwBH1Wvv13RRfwAAAABJRU5ErkJggg==\"","import React from 'react';\nimport DocViewer, { DocViewerRenderers } from \"react-doc-viewer\";\n\nconst DocViewerComponent = ({ src, width, height, isHeader }) => {\n    // https://docs.google.com/viewer?url=\n    let checkFormat = src;\n    let splitElements = checkFormat.split('.');\n    let extension = splitElements[splitElements?.length - 1];\n    let screenWidth = window.screen.width;\n    // console.log({ src, width, height, screenWidth })\n    return (\n        <DocViewer\n            pluginRenderers={DocViewerRenderers}\n            documents={[{ uri: src, fileType: extension }]}\n            style={{\n                height: height ? height : window.screen.height,\n                width: '100%',\n                paddingTop: width !== '100%' ? 80 : 0\n            }}\n            theme={{\n                disableThemeScrollbar: true,\n            }}\n            config={{\n                header: {\n                    disableHeader: isHeader ? false : true,\n                    disableFileName: false,\n                    retainURLParams: true,\n                }\n            }}\n            className={`${isHeader ? '' : 'doc-viewer-download-disabled'}`}\n        />\n    )\n\n    // return (\n    //     <div>\n    //         <iframe\n    //             src={'https://docs.google.com/gview?url=' + src + '&embedded=true'}\n    //             sandbox='allow-forms allow-pointer-lock allow-popups allow-same-origin allow-scripts allow-top-navigation'\n    //             allow=\"fullscreen\"\n    //             allowFullScreen=\"allow\"\n    //             title=\"file\"\n    //             width={width || '100%'}\n    //             style={{ minHeight: height || '800px', maxHeight: '2000px' }}\n    //         // style={{ Height: '450px', maxHeight: '450px', overflowY: 'scroll' }}\n    //         ></iframe>\n    //     </div>\n    // )\n}\n\nexport default DocViewerComponent;\n","import React, { useState, useEffect } from 'react'\nimport cancel from '../../assets/images/ic-cancel.png';\nimport Modal from '@material-ui/core/Modal';\nimport DocViewer from '../../common/DocViewer';\n\nconst VoucherDetail = (props: any) => {\n    const { toggleProps, item, closeToggle } = props;\n    const [toggleRecommendation, setToggleRecommendation] = useState(false);\n\n    useEffect(() => {\n        setToggleRecommendation(toggleProps);\n    }, [toggleProps])\n\n    useEffect(() => {\n        \n    }, [item?.recommendation])\n\n    console.log({ item: item?.recommendation, data: item });\n    return (\n        <Modal\n            className=\"custom_modal\"\n            open={toggleRecommendation}\n            onClose={() => {\n                closeToggle();\n                setToggleRecommendation((prev: any) => !prev)\n            }}\n            aria-labelledby=\"simple-modal-title\"\n            aria-describedby=\"simple-modal-description\"\n        >\n            <div className=\"custom_wh vouch_modal\" data-aos=\"zoom-in\" data-aos-delay=\"30\" data-aos-duration=\"1000\">\n                <div className=\"heading\">\n                    <span className=\"sub_title\">\n                        {'Recommendation about work'}\n                    </span>\n                    <button\n                        onClick={() => {\n                            closeToggle();\n                            setToggleRecommendation((prev: any) => !prev)\n                        }}\n                        className=\"close_btn\">\n                        <img src={cancel} alt=\"cancel\" />\n                    </button>\n                </div>\n                <div className=\"inner_wrap descr\">\n                    <div className=\"inner_wrappr\">\n                        <div className=\"form_field\">\n                            <span className=\"show_label\"><b>Job position:</b>{item?.jobName}</span>\n                            <span className=\"show_label\"><b>Trader:</b> {item?.tradieName}</span>\n                        </div>\n\n                        <DocViewer\n                            src={item?.recommendation}\n                            width=\"100%\"\n                            height=\"1200px\"\n                            isHeader={false}\n                        />\n\n                    </div>\n                </div>\n            </div>\n        </Modal>\n    )\n}\n\nexport default VoucherDetail;\n","import React, { useState, useEffect } from \"react\";\nimport cancel from \"../../assets/images/ic-cancel.png\";\nimport addMedia from \"../../assets/images/add-image.png\";\nimport Modal from \"@material-ui/core/Modal\";\nimport { setShowToast } from \"../../redux/common/actions\";\n\nimport close from \"../../assets/images/icon-close-1.png\";\nimport { onFileUpload } from \"../../redux/auth/actions\";\nimport { AddVoucher, fetchVouchesJobs } from \"../../redux/jobs/actions\";\nimport docThumbnail from \"../../assets/images/add-document.png\";\nimport { moengage, mixPanel } from \"../../services/analyticsTools\";\nimport { MoEConstants } from \"../../utils/constants\";\nimport Select, { components } from \"react-select\";\nconst docformats: Array<any> = [\"pdf\", \"doc\", \"docx\", \"msword\"];\n\nconst AddVoucherComponent = (props: any) => {\n  const { toggleProps, closeToggle } = props;\n  const [toggle, setToggle] = useState(false);\n  const [jobsList, setJobsList] = useState([]);\n  const [reactSelect, setReactSelect] = useState({ label: \"\", value: \"\" });\n  const [jobDescription, setJobDesciption] = useState(\"\");\n\n  const [errorData, setErrorData] = useState({\n    name: \"\",\n    detail: \"\",\n    upload: \"\",\n  });\n  const [filesUrl, setFilesUrl] = useState([] as any);\n  const [localFiles, setLocalFiles] = useState({});\n\n  const [update, forceUpdate] = useState({});\n  const [toggler, setToggler] = useState(false);\n  const [selectedSlide, setSelectSlide] = useState(1);\n\n  useEffect(() => {\n    prefetch();\n  }, []);\n\n  useEffect(() => {\n    console.log({\n      toggleProps,\n    });\n    setToggle(toggleProps);\n  }, [toggleProps]);\n\n  useEffect(() => {\n    setErrorData((prev: any) => ({\n      ...prev,\n      detail:\n        jobDescription?.length > 1000\n          ? \"Maximum 1000 characters are allowed\"\n          : \"\",\n    }));\n  }, [jobDescription]);\n\n  // useEffect(() => {\n  //     setErrorData((prev: any) => ({ ...prev, upload: filesUrl?.length ? '' : 'Document file is required' }));\n  // }, [filesUrl]);\n\n  useEffect(() => {\n    console.log({ toggle });\n    if (!toggle) {\n      closeToggle(\"isRecall\");\n      setReactSelect((prev: any) => ({ ...prev, label: \"\", value: \"\" }));\n      setJobDesciption(\"\");\n      setFilesUrl([]);\n      setErrorData((prev: any) => ({\n        ...prev,\n        name: \"\",\n        detail: \"\",\n        upload: \"\",\n      }));\n    } else {\n      prefetch();\n    }\n  }, [toggle]);\n\n  const prefetch = async () => {\n    if (props?.id) {\n      let res_jobs: any = await fetchVouchesJobs({\n        page: 1,\n        tradieId: props.id,\n      });\n      if (res_jobs?.success) {\n        let list_data: any = res_jobs.data;\n        if (list_data?.length) {\n          // let item = list_data[0];\n          // item?.jobId\n          setReactSelect({ label: \"Please select  a job\", value: \"\" });\n        }\n        setJobsList(list_data);\n      }\n    }\n  };\n\n  const setItemToggle = (index: any) => {\n    setToggler((prev: boolean) => !prev);\n    setSelectSlide(index + 1);\n  };\n\n  const removeFromItem = (index: any) => {\n    filesUrl.splice(index, 1);\n    setFilesUrl(filesUrl);\n    Array.isArray(update) ? forceUpdate([]) : forceUpdate({});\n  };\n\n  const onFileChange = async (e: any) => {\n    const formData = new FormData();\n    const newFile = e.target.files[0];\n\n    var fileType = newFile?.type?.split(\"/\")[1]?.toLowerCase();\n    var selectedFileSize = newFile?.size / 1024 / 1024; // size in mib\n\n    if (docformats.indexOf(fileType) < 0 || selectedFileSize > 10) {\n      setShowToast(true, \"The file must be in proper format or size\");\n      return;\n    }\n\n    if (docformats.includes(fileType) && selectedFileSize > 10) {\n      // image validations\n      setShowToast(true, \"The image file size must be below 10 mb\");\n      return;\n    }\n\n    formData.append(\"file\", newFile);\n    const res = await onFileUpload(formData);\n    if (res.success) {\n      let link: string = res.imgUrl;\n\n      setFilesUrl((prev: Array<any>) => [\n        ...prev,\n        {\n          mediaType: [\"doc\", \"docx\", \"msword\"].includes(fileType) ? 3 : 4,\n          link: link,\n        },\n      ]);\n      setLocalFiles((prev: any) => ({\n        ...prev,\n        [filesUrl?.length]: URL.createObjectURL(newFile),\n      }));\n    }\n  };\n\n  const renderbyFileFormat = (item: any, index: any) => {\n    let split_item_format = item.split(\".\");\n    let get_split_fromat = split_item_format[split_item_format.length - 1];\n\n    let split_item_name = item.split(\"/\");\n    let get_split_name = split_item_name[split_item_name.length - 1];\n    let image_render: any = null;\n    if (get_split_fromat) {\n      if (docformats.includes(get_split_fromat)) {\n        image_render = (\n          <img\n            onClick={() => {\n              setItemToggle(index);\n            }}\n            title={get_split_name}\n            src={docThumbnail}\n            alt=\"media\"\n          />\n        );\n      }\n      return (\n        <figure className=\"img_video\">\n          {image_render}\n          <img\n            onClick={() => {\n              removeFromItem(index);\n            }}\n            src={close}\n            alt=\"remove\"\n            className=\"remove\"\n          />\n          {/* <span style={{ fontSize: '10px' }}>{get_split_name}</span> */}\n        </figure>\n      );\n    }\n  };\n\n  const handleSubmit = async () => {\n    let data = {\n      jobId: reactSelect?.value,\n      jobName: reactSelect?.label,\n      tradieId: props.id,\n      photos: [filesUrl[0].link],\n      vouchDescription: jobDescription,\n      recommendation: filesUrl[0].link,\n    };\n    let response = await AddVoucher(data);\n    if (response?.success) {\n      moengage.moE_SendEvent(MoEConstants.LEFT_VOUCHER, {\n        timeStamp: moengage.getCurrentTimeStamp(),\n      });\n      mixPanel.mixP_SendEvent(MoEConstants.LEFT_VOUCHER, {\n        timeStamp: moengage.getCurrentTimeStamp(),\n      });\n      setToggle((prev: any) => !prev);\n      await prefetch();\n    }\n  };\n\n  let JobSelectOptions: any = [];\n  if (jobsList?.length) {\n    JobSelectOptions = jobsList.map((item: any) => ({\n      label: item?.jobName,\n      value: item?.jobId,\n    }));\n    JobSelectOptions.unshift({ label: \"Please select a job\", value: \"\" });\n  }\n\n  const NoOptionsMessage = (props: any) => {\n    return (\n      <components.NoOptionsMessage {...props}>\n        <span className=\"custom-css-class\">\n          {\"No completed jobs with this tradesperson\"}\n        </span>\n      </components.NoOptionsMessage>\n    );\n  };\n\n  return (\n    <Modal\n      className=\"custom_modal\"\n      open={toggle}\n      onClose={() => {\n        closeToggle(\"isRecall\");\n        setToggle((prev: any) => !prev);\n      }}\n      aria-labelledby=\"simple-modal-title\"\n      aria-describedby=\"simple-modal-description\"\n    >\n      <div\n        className=\"custom_wh profile_modal vouch_modal\"\n        data-aos=\"zoom-in\"\n        data-aos-delay=\"30\"\n        data-aos-duration=\"1000\"\n      >\n        <div className=\"heading\">\n          <span className=\"sub_title\">{\"Leave a Vouch\"}</span>\n          <span className=\"info_note\">\n            {\"Upload the vouch and write the description.\"}\n          </span>\n          <button\n            onClick={() => {\n              closeToggle(\"isRecall\");\n              setToggle((prev: any) => !prev);\n            }}\n            className=\"close_btn\"\n          >\n            <img src={cancel} alt=\"cancel\" />\n          </button>\n        </div>\n        <div className=\"inner_wrap\">\n          <div className=\"inner_wrappr\">\n            <div className=\"form_field\">\n              <label className=\"form_label\">Job</label>\n              <div className=\"text_field\">\n                <Select\n                  className=\"select_menu\"\n                  value={reactSelect}\n                  options={JobSelectOptions}\n                  components={{ NoOptionsMessage }}\n                  // options={jobsList.map((item: any) => ({ label: item?.jobName, value: item?.jobId }))}\n                  onChange={(item: any) => {\n                    setReactSelect(item);\n                    setErrorData((prev: any) => ({ ...prev, name: \"\" }));\n                  }}\n                />\n              </div>\n              <span className=\"error_msg\">{errorData?.name}</span>\n            </div>\n            <div className=\"form_field\">\n              <label className=\"form_label\">{\"Job Description\"}</label>\n              <div className=\"text_field\">\n                <textarea\n                  onChange={(e) => {\n                    setJobDesciption(e.target.value.trimLeft());\n                  }}\n                  value={jobDescription}\n                  placeholder=\"Enter Description...\"\n                ></textarea>\n                {jobDescription.length ? (\n                  <span className=\"char_count\">\n                    {`character length : ${jobDescription.length} / 1000`}\n                  </span>\n                ) : (\n                  \"\"\n                )}\n              </div>\n              <span className=\"error_msg\">{errorData?.detail}</span>\n            </div>\n            <div className=\"upload_img_video\">\n              {filesUrl?.length\n                ? filesUrl.map((item: any, index: number) =>\n                    renderbyFileFormat(item.link, index)\n                  )\n                : null}\n\n              {filesUrl?.length < 1 ? (\n                <React.Fragment>\n                  <label className=\"upload_media\" htmlFor=\"upload_img_video\">\n                    <img src={addMedia} alt=\"\" />\n                  </label>\n                  <input\n                    onChange={onFileChange}\n                    type=\"file\"\n                    accept=\"image/png,image/jpg,image/jpeg,.pdf, .doc, video/mp4, video/wmv, video/avi\"\n                    style={{ display: \"none\" }}\n                    id=\"upload_img_video\"\n                  />\n                </React.Fragment>\n              ) : null}\n            </div>\n            <span className=\"error_msg\">{errorData?.upload}</span>\n          </div>\n        </div>\n        <div className=\"bottom_btn custom_btn\">\n          <button\n            onClick={() => {\n              if (!filesUrl?.length || !jobDescription?.length) {\n                if (!filesUrl?.length) {\n                  setErrorData((prev: any) => ({\n                    ...prev,\n                    upload: \"Document file is required.\",\n                  }));\n                }\n\n                if (!jobDescription?.length) {\n                  setErrorData((prev: any) => ({\n                    ...prev,\n                    detail: \"Job Description is required\",\n                  }));\n                }\n\n                if (!reactSelect?.value?.length) {\n                  setErrorData((prev: any) => ({\n                    ...prev,\n                    name: \"Job Name is required\",\n                  }));\n                }\n              } else {\n                handleSubmit();\n              }\n            }}\n            className={`fill_btn full_btn btn-effect`}\n          >\n            {\"Save changes\"}\n          </button>\n        </div>\n      </div>\n    </Modal>\n  );\n};\n\nexport default AddVoucherComponent;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAC9SURBVHgB7ZW9DcIwEIXfHSmQUsAIGYERnA0owxhMgDIBbEFKmMAegREyAk0kmvhwg2Q3sWRkaPxJLu7Ouh+9kw7IDPnGWl0bZj6TyBYpEMbZSv8yh/HjYj++Yjq55ArijLS3Z9DFz1kFHVg0rovHZLoWCdRq0ETY+D5GZrIXqGIf6naQpfikO1qK/3+CWIcxigZRigZFg+8pBaIEIgvTkwTKraZGGjt3Nm++I5jAWnuE2HvqTRYhM0N6/JI3jDZWBsbPmuEAAAAASUVORK5CYII=\"","import React, { useState, useEffect } from 'react'\nimport dummy from '../../assets/images/u_placeholder.jpg';\nimport vouch from '../../assets/images/ic-template.png';\nimport { withRouter } from 'react-router-dom';\nimport {\n    getVouchers\n} from '../../redux/jobs/actions';\nimport storageService from '../../utils/storageService';\n\nimport AddVoucherModal from './addVoucher';\nimport VoucherDetailModal from './voucherDetail';\n\nimport InfiniteScroll from \"react-infinite-scroll-component\";\n\n\nconst Vouchers = (props: any) => {\n    const [stateData, setStateData] = useState<any>([]);\n    const [errors, setErrors] = useState({});\n    const [toggleRecommendation, setToggleRecommendation] = useState({ isTrue: false, item: {} });\n    const [jobsList, setJobsList] = useState([]);\n    const [toggle, setToggle] = useState(false);\n    const [selectedItem, setSelectedItem] = useState({});\n    const [currentPage, setCurrentPage] = useState(1);\n    const [hasMore, setHasMore] = useState(true);\n\n    let id = props?.location?.state?.id;\n    let path = props?.location?.state?.path;\n    let search: any = props?.location?.search || '';\n\n    if (search?.length) {\n        const urlParams = new URLSearchParams(search);\n        let tradieId: any = urlParams.get('tradieId');\n        if (tradieId?.length) {\n            id = tradieId;\n        }\n    }\n    const closeToggle = (isRecall?: string) => {\n        setToggleRecommendation({ isTrue: false, item: {} });\n        setSelectedItem({});\n        setToggle((prev: any) => false);\n        if (isRecall === 'isRecall') {\n            prefetch();\n        }\n    }\n\n\n\n    useEffect(() => {\n        prefetch();\n    }, [id, path])\n\n\n    const prefetch = async () => {\n        let res_profile: any = await getVouchers({ tradieId: id, page: 1 })\n        if (res_profile.success) {\n            let completeItems = res_profile?.data?.voucher || res_profile?.data;  //[]\n            setStateData(completeItems);\n        }\n    }\n\n\n    let state_data: any = stateData;\n\n    return (\n        <div className=\"app_wrapper\">\n            <div className=\"section_wrapper\">\n                <div className=\"custom_container\">\n\n                    <VoucherDetailModal\n                        toggleProps={toggleRecommendation.isTrue}\n                        item={toggleRecommendation.item}\n                        id={id}\n                        closeToggle={closeToggle}\n                    />\n                    {storageService.getItem('userType') === 2 &&\n                        <AddVoucherModal\n                            toggleProps={toggle}\n                            id={id}\n                            closeToggle={closeToggle}\n                        />}\n\n                    <div className=\"flex_row\">\n                        <div className=\"flex_col_sm_6\">\n                            <div className=\"relate\">\n                                <button\n                                    onClick={() => {\n                                        // let path: any = props.location.state.path;\n                                        if (!path) {\n                                            props.history.push('/');\n                                        } else {\n                                            props.history.push(`tradie-info${path}`);\n                                        }\n                                    }}\n                                    className=\"back\"></button>\n                                <span className=\"title\">\n                                    {`${stateData.length} ${stateData.length === 1 ? 'Vouch' : 'Vouches'}`}\n                                </span>\n                            </div>\n                        </div>\n                        {storageService.getItem('userType') === 2 && <div className=\"flex_col_sm_6 text-right\">\n                            <button\n                                onClick={() => { setToggle((prev: any) => true) }}\n                                className=\"fill_btn btn-effect add_vouch\">\n                                {'+ Leave a Vouch'}\n                            </button>\n                        </div>}\n                    </div>\n\n                    {state_data?.length ?\n                        <div className=\"section_wrapper\">\n                            <div className=\"custom_container\">\n                                <span className=\"sub_title\">\n                                    {'Vouches'}\n                                </span>\n\n                                <InfiniteScroll\n                                    dataLength={state_data?.length}\n                                    next={async () => {\n                                        console.log('Here!!!');\n                                        let cp: any = currentPage + 1;\n                                        setCurrentPage((prev: any) => prev + 1);\n                                        let response = await getVouchers({ tradieId: id, page: cp });\n                                        if (response.success) {\n                                            let completeItems = response?.data?.voucher || response?.data;  //[]\n                                            if (completeItems?.length) {\n                                                setStateData((prev: any) => ([...prev, ...completeItems]));\n                                            } else {\n                                                setHasMore(false);\n                                            }\n                                        }\n                                    }}\n                                    hasMore={hasMore}\n                                    loader={<></>}\n                                    className=\"flex_row\">\n                                    {state_data.map((item: any) => (\n                                        <div className=\"flex_col_sm_3\">\n                                            <div className=\"review_card vouchers\">\n                                                <div className=\"pic_shot_dtl\">\n                                                    <figure className=\"u_img\">\n                                                        <img\n                                                            src={item?.builderImage || dummy}\n                                                            alt=\"user-img\"\n                                                            onError={(e: any) => {\n                                                                if (e?.target?.onerror) {\n                                                                    e.target.onerror = null;\n                                                                }\n                                                                if (e?.target?.src) {\n                                                                    e.target.src = dummy;\n                                                                }\n                                                            }}\n                                                        />\n                                                    </figure>\n                                                    <div className=\"name_wrap\">\n                                                        <span className=\"user_name\" title={item?.builderName || ''}>\n                                                            {item?.builderName || ''}\n                                                        </span>\n                                                        <span className=\"date\">\n                                                            {item?.date}\n                                                        </span>\n                                                    </div>\n                                                </div>\n\n                                                <span className=\"xs_head\">\n                                                    {item?.jobName}\n                                                </span>\n\n                                                <p className=\"commn_para\" title=\"\">\n                                                    {item?.vouchDescription || ''}\n                                                </p>\n                                                <div className=\"vouch\">\n                                                    <figure className=\"vouch_icon\">\n                                                        <img src={vouch} alt=\"vouch\" />\n                                                    </figure>\n                                                    <span\n                                                        onClick={(e) => {\n                                                            e.preventDefault();\n                                                            setToggleRecommendation((prev: any) => ({ ...prev, ...{ isTrue: true, item: item } }));\n                                                        }}\n                                                        className=\"link\">\n                                                        {`Vouch for ${item?.tradieName}`}\n                                                    </span>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    ))}\n                                </InfiniteScroll>\n\n                            </div>\n                        </div>\n                        : null}\n                </div>\n            </div>\n        </div >\n    )\n}\n\nexport default withRouter(Vouchers);"],"sourceRoot":""}