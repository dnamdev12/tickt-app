{"version":3,"sources":["assets/images/ic-cancel-blue.png","assets/images/menu-line-blue.png","assets/images/not-found.png","assets/images/video@3x.png","pages/chat/userMessages.tsx","assets/images/icon-direction-blue.png","assets/images/ic-media.png","assets/images/ic-send.png","pages/chat/chat.tsx","assets/images/search-chat.png","pages/chat/index.tsx"],"names":["lastDate","docTypes","UserMessages","props","divRref","useRef","useState","storageService","getItem","_id","userId","toggle","setToggle","jobDetailLoader","setJobDetailLoader","currentJobDetails","setCurrentJobDetails","messageText","setMessageText","messages","setMessages","isDocUploading","setIsDocUploading","itemsMedia","setItemsMedia","toggler","setToggler","selectedSlide","setSelectSlide","fsSlideListner","setFsSlideListner","useEffect","roomId","getMessagesOfRoom","onReceiveOfNewMsg","console","log","roomData","scrollToBottom","current","scroll","scrollHeight","clientHeight","scrollTo","arrmsg","fsSlideObj","mediaMsgs","slideCount","length","filter","item","index","messageType","setInboxToTopWithLastMsg","lastMsg","newInboxData","inBoxData","currentIndex","findIndex","i","splice","unshift","setInBoxData","sendMessage","a","trimLeft","sendTextMessage","oppUserInfo","deviceToken","deviceType","hasOwnProperty","isNotification","sendFCMPushNotificationToOppUser","mData","timeStamp","moengage","getCurrentTimeStamp","moE_SendEvent","MoEConstants","CHAT","mixPanel","mixP_SendEvent","sendImageVideoMsg","url","msgType","sendImageVideoMessage","fetchJobDetail","jobId","getJobDetails","res","success","jobInfo","jobDescription","data","details","jobName","amount","locationName","fromDate","toDate","duration","status","setResDeviceType","msg","Number","app_icon","title","notificationText","userName","senderName","room_id","messageRoomId","image","user_image","notificationType","sound","body","sender","first_name","device_token","user_id","device_type","split","badge","notification_type","messageId","notification","newData","to","headers_","Constants","FcmHeaderAuthorizationKey","fetch","method","headers","JSON","stringify","handleUpload","e","maxFileSize","formData","FormData","newFile","target","files","fileType","type","toLowerCase","selectedFileSize","size","includes","indexOf","setShowToast","append","check_type","onFileUpload","imgUrl","displayMessages","curDate","formatDateTime","messageTimestamp","messageClass","senderId","className","renderTextMsg","src","mediaUrl","notFound","alt","decoding","loading","onError","onerror","onClick","prev","renderImageMsg","poster","chatVideoIcon","renderVideoMsg","sources","types","forEach","push","renderMediaItems","isNoRecords","slide","onClose","dummy","history","name","ref","map","isBlock","style","color","htmlFor","id","accept","onChange","disabled","placeholder","onKeyDown","event","key","value","loader","width","close","renderTime","urlEncode","selectedRoomID","isFreshChatRoute","Chat","initializing","setInitializing","auth","currentUser","user","setUser","filterInBoxData","setFilterInBoxData","setIsNoRecords","setRoomData","setRoomId","searchQuery","setSearchQuery","searchActive","setSearchActive","isInitialLoader","setIsInitialLoader","isMobInbox","setIsMobInbox","location","state","tradieId","builderId","setLoading","setInitialItems","getFirebaseInboxData","onUpdateofInbox","stopListeningOfRoom","roomID","checkRoomExist","createRoom","selectedRoomInfo","sortedRes","sort","x","y","ress","newRes","Array","isArray","unreadMessages","resetUnreadCounter","itemObj","find","unsubscribe","onAuthStateChanged","getRoomDetails","filteredVal","menu","href","isLoading","noData","ChatComponent","connect","common","isSkeletonLoading","dispatch","bindActionCreators"],"mappings":"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","file":"static/js/30.23262937.chunk.js","sourcesContent":["export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFVSURBVHgB7ZTPTcMwFMbfswTqn0tG6AhhA6cT9ATKjUwATECYoGKC9kbLhQ2oN6AjZAQfaFRU4YedJlUIjmOExKHqJ0WKbL/f5/fZMsBJRy+0Dfb54gYZ8nOVJ1Ik0gXo8acRY2zKlHp8F7FozjOrq4Yj0WSHg1XAZ4ETjrgya4nRxLbGaqCUuiOADIDCNpMDHGCkt7Q+Ux+pjWWNyAqgPKri+j4H2SdRtBVxBr4dGJkCpQvrnZhx040v3NmBtROEORCGxtAH7mXww2QvL7gRAw/1YCsRUNa2JXzg3gY77L9UsehPAsH1cLyY+dR2GpQgDmUsQCyqTAbj5X1XPXbCNQgamQ/5cwiozK0KCDHNX68efm1Qg0sNv2hmXpq8mX+XCbPDl9MKbiKxHehGXK6BKCl2SZTq9+vW24D217GAF6AWbUQ8P5gAtb5ZVrkeub+sPen/9QVDS7zkZB34uAAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAW0lEQVRIS2NkoDFgpLH5DMPMAm7HFf+pEWRf90fAQwYliGhuATVcj27GMIvk4RtEpKYunMkUVxDR3AJK4mY0mRIMPfoGEampBZfzR0tTghGLrIC+kUyS04hUDAD9mBgZUEFJtQAAAABJRU5ErkJggg==\"","export default __webpack_public_path__ + \"static/media/not-found.c5fd5f1f.png\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAA8CAYAAAAZp4inAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHpSURBVHgB1Zr/UcJAEIVfHAuwhKMD6UA60AqUDrQCsQQrkA6kA9KBdJDrQDpYd03Qm0zQS3I/9r6Z/SMMwzzefAkXckAHEV3zvPF8UstHd2ygFQ53T+dp5EtBG9Io+fEMTXQ6+PKuRh3HaV8a0qAOTSevOjSPfOrQfBrKoQ6FI606FJZ06lB4GkqgzgXCY3hkuRBXHYpLNHUq+XTExfLcVVV1QEBiqNLHIIY6lJZg6qRQpY9FAHVSqNLHIIA6ORp32fE8cfsWI8kdXLCYoE4OVfoYTFBHQ+Mu3upoCy5YeKijQZU+Bh7qaGzc5aw62oMLFgPqaFSlj8GAOiU07iLqrLn9Y2nBhZqDr0oMLqxLDV6XcHIOYUoNfiw1+KFUxxclNi7XcVtScMuz4tBbOSgl+AvPkkPXpxcuoRtZWK2H1uZaGz+iXc4uz91QaGy8RncC/vUmTY2fWl753HNqabyGR8suuRsf1bJLzsZ/bgowgRzBJagE3mEGqVV55VnMDS2katyibblGIFI0Li0vQ4b+huLR8NwgFhSHDc8VYkJhkT9u0jzXpzDInpcNUkLz2VOOrR80HWn5Ebmg8Vub8rXcC74fEThvyy7UbpT0QZ4Kx73EjYUDPfzT8i20Qu3GyS39Ot9Qih+SiXwBkwmQStsXLyMAAAAASUVORK5CYII=\"","import React, { useState, useEffect, useRef } from 'react';\nimport { getJobDetails } from '../../redux/jobs/actions';\nimport storageService from '../../utils/storageService';\n\nimport notFound from '../../assets/images/not-found.png';\nimport chatVideoIcon from '../../assets/images/video@3x.png';\nimport dummy from '../../assets/images/u_placeholder.jpg';\nimport viewMore from '../../assets/images/icon-direction-blue.png';\nimport close from '../../assets/images/ic-cancel-blue.png';\nimport sendMedia from '../../assets/images/ic-media.png';\nimport sendBtn from '../../assets/images/ic-send.png';\nimport loader from '../../assets/images/loader.gif';\n\nimport { formatDateTime, renderTime } from '../../utils/common';\nimport { setShowToast } from '../../redux/common/actions';\nimport { onFileUpload } from '../../redux/auth/actions';\nimport {\n    getMessagesOfRoom,\n    sendTextMessage,\n    sendImageVideoMessage,\n} from '../../services/firebase';\n\nimport Constants from '../../utils/constants';\n\n//@ts-ignore\nimport FsLightbox from 'fslightbox-react';\nimport { moengage, mixPanel } from '../../services/analyticsTools';\nimport { MoEConstants } from '../../utils/constants';\ninterface Types {\n    [key: string]: any | string;\n}\n\nlet lastDate = '';\nconst docTypes: Array<any> = [\"jpeg\", \"jpg\", \"png\", \"mp4\", \"wmv\", \"avi\"];\n\nconst UserMessages = (props: any) => {\n    const divRref = useRef<HTMLDivElement>(null);\n    const [userId] = useState<string>(storageService.getItem('userInfo')?._id);\n    const [toggle, setToggle] = useState<boolean>(false);\n    const [jobDetailLoader, setJobDetailLoader] = useState<boolean>(false);\n    const [currentJobDetails, setCurrentJobDetails] = useState<any>(null);\n    const [messageText, setMessageText] = useState<any>('');\n    const [messages, setMessages] = useState<Array<any>>([]);\n    const [isDocUploading, setIsDocUploading] = useState<boolean>(false);\n\n    const [itemsMedia, setItemsMedia] = useState([]);\n    const [toggler, setToggler] = useState(false);\n    const [selectedSlide, setSelectSlide] = useState<any>(1);\n    const [fsSlideListner, setFsSlideListner] = useState<any>({});\n    const [oppUserFcmToken, setOppUserFcmToken] = useState<any>('');\n\n    useEffect(() => {\n        if (props.roomId !== '') {\n            lastDate = '';\n            getMessagesOfRoom(props.roomId, onReceiveOfNewMsg);\n            setSelectSlide(1);\n            setFsSlideListner({});\n            setItemsMedia([]);\n            setCurrentJobDetails(null);\n            setToggle(false);\n        }\n    }, [props.roomId]);\n    // }, [props.roomId, props.roomData]);\n    console.log('props.roomData: ', props.roomData);\n\n    useEffect(() => {\n        scrollToBottom();\n    });\n\n    const scrollToBottom = () => {\n        if (null !== divRref?.current) {\n            const scroll =\n                divRref.current.scrollHeight -\n                divRref.current.clientHeight;\n            // divRref.current.scrollIntoView({ behavior: \"smooth\" })\n            divRref.current.scrollTo(0, scroll);\n        }\n    }\n\n    const onReceiveOfNewMsg = (arrmsg: any) => {\n        console.log('arrmsg: ', arrmsg);\n        setMessages(arrmsg);\n    }\n\n    useEffect(() => {\n        let fsSlideObj: any = {};\n        let mediaMsgs: any = [];\n        let slideCount = 1;\n        if (messages.length) {\n            mediaMsgs = messages.filter((item: any, index: number) => {\n                if (item.messageType === 'image' || item.messageType === 'video') {\n                    fsSlideObj[`${index}`] = slideCount++;\n                    return item;\n                }\n            });\n            setItemsMedia(mediaMsgs);\n            setFsSlideListner(fsSlideObj);\n        }\n    }, [messages]);\n    console.log('itemsMedia: ', itemsMedia, \"fsSlideListner\", fsSlideListner);\n\n    const setInboxToTopWithLastMsg = (lastMsg: any) => {\n        const newInboxData = [...props.inBoxData];\n        const currentIndex = newInboxData.findIndex(i => i.roomId === props.roomId);\n        newInboxData[currentIndex].lastMsg = lastMsg;\n        newInboxData.splice(currentIndex, 1);\n        newInboxData.unshift(props.inBoxData[currentIndex]);\n        props.setInBoxData(newInboxData);\n        console.log('lastMsg: ', lastMsg);\n        console.log('currentIndex: ', currentIndex);\n        console.log('newInboxData: ', newInboxData);\n    }\n\n    const sendMessage = async () => {\n        //setIsLoading(true);\n        if (messageText && messageText.trimLeft() !== \"\") {\n            setMessageText('');\n            const lastMsg: any = await sendTextMessage(props.roomId, messageText);\n            if (lastMsg &&\n                props.roomData?.oppUserInfo?.deviceToken\n                && props.roomData?.oppUserInfo?.deviceType\n                && (props.roomData?.oppUserInfo?.hasOwnProperty('isNotification') ? props.roomData?.oppUserInfo?.isNotification : true)\n            ) {\n                sendFCMPushNotificationToOppUser(lastMsg);\n                const mData = {\n                    timeStamp: moengage.getCurrentTimeStamp(),\n                }\n                moengage.moE_SendEvent(MoEConstants.CHAT, mData);\n                mixPanel.mixP_SendEvent(MoEConstants.CHAT, mData);\n            }\n            setInboxToTopWithLastMsg(lastMsg);\n        }\n    }\n\n    const handleKeyDown = (event: any) => {\n        if (event.key === 'Enter') {\n            sendMessage();\n        }\n    }\n\n    const sendImageVideoMsg = async (url: string, msgType: string) => {\n        //setIsLoading(true);\n        if (url && url !== '') {\n            const lastMsg: any = await sendImageVideoMessage(props.roomId, url, msgType);\n            if (lastMsg\n                && props.roomData?.oppUserInfo?.deviceToken\n                && props.roomData?.oppUserInfo?.deviceType\n                && (props.roomData?.oppUserInfo?.hasOwnProperty('isNotification') ? props.roomData?.oppUserInfo?.isNotification : true)\n            ) {\n                sendFCMPushNotificationToOppUser(lastMsg);\n            }\n            setInboxToTopWithLastMsg(lastMsg);\n        }\n        setMessageText('');\n    }\n\n\n    const fetchJobDetail = async (jobId: any) => {\n        setJobDetailLoader(true);\n        const res = await getJobDetails(jobId);\n        if (res.success) {\n            const jobInfo = {\n                jobDescription: res.data?.details || '',\n                jobId: res.data?.jobId || '',\n                jobName: res.data?.jobName || '',\n                amount: res.data?.amount || '',\n                locationName: res.data?.locationName || '',\n                fromDate: res.data?.fromDate || '',\n                toDate: res.data?.toDate || '',\n                duration: res.data?.duration || '',\n                status: res.data?.status || '',\n            }\n            setCurrentJobDetails(jobInfo);\n            setJobDetailLoader(false);\n        }\n    }\n\n    const renderMediaItems = (itemsMedia: any) => {\n        let sources: any = [];\n        let types: any = [];\n\n        if (itemsMedia.length) {\n            itemsMedia.forEach((item: any) => {\n                if (item.messageType === 'video') {\n                    sources.push(item.mediaUrl);\n                    types.push('video');\n                }\n                if (item.messageType === 'image') {\n                    sources.push(item.mediaUrl);\n                    types.push('image');\n                }\n            })\n        }\n\n        return { sources, types };\n    }\n\n    const setResDeviceType = (deviceType: number, msg: any) => {\n        switch (Number(deviceType)) {\n            case 1:\n                return {\n                    app_icon: \"https://appinventiv-development.s3.amazonaws.com/1628513615740ic-logo-yellow.png\",\n                    title: \"Tickt App\",\n                    notificationText: `${storageService.getItem('userInfo')?.userName} send you a message`,\n                    senderName: `${storageService.getItem('userInfo')?.userName}`,\n                    messageType: `${msg?.messageType}`,\n                    messageText: `${msg?.messageType === 'text' ? msg?.messageText : ''}`,\n                    room_id: msg?.messageRoomId,\n                    image: storageService.getItem('userInfo')?.user_image,\n                    notificationType: 25,\n                    sound: \"default\",\n                }\n            case 2:\n                return {\n                    body: msg?.messageText,\n                    messageText: msg?.messageText,\n                    sender: {\n                        first_name: storageService.getItem('userInfo')?.userName,\n                        device_token: storageService.getItem('fcmToken'),\n                        user_id: storageService.getItem('userInfo')?._id,\n                        device_type: 2,\n                    },\n                    jobId: msg?.messageRoomId?.split('_')?.[0],\n                    badge: 1,\n                    device_type: 2,\n                    title: storageService.getItem('userInfo')?.userName,\n                    jobName: props.roomData?.jobName,\n                    notification_type: 50,\n                    sound: 'default',\n                    messageId: msg?.messageId,\n                }\n            case 3:\n                return {\n                    notification: {\n                        body: msg?.messageText,\n                        title: storageService.getItem('userInfo')?.userName\n                    },\n                    data: {\n                        body: msg?.messageText,\n                        messageText: msg?.messageText,\n                        sender: {\n                            first_name: storageService.getItem('userInfo')?.userName,\n                            device_token: storageService.getItem('fcmToken'),\n                            user_id: storageService.getItem('userInfo')?._id,\n                            device_type: 2,\n                        },\n                        jobId: msg?.messageRoomId?.split('_')?.[0],\n                        badge: 1,\n                        device_type: 2,\n                        title: storageService.getItem('userInfo')?.userName,\n                        jobName: props.roomData?.jobName,\n                        notification_type: 50,\n                        sound: 'default',\n                        messageId: msg?.messageId,\n                    }\n                }\n            default:\n                return;\n        }\n    }\n    const sendFCMPushNotificationToOppUser = async (msg: any) => {\n        let data = setResDeviceType(props.roomData?.oppUserInfo?.deviceType, msg);\n        let newData = {\n            to: `${props.roomData?.oppUserInfo?.deviceToken}`,\n            ...(props.roomData?.oppUserInfo?.deviceType == 1 && { data: data }),\n            ...(props.roomData?.oppUserInfo?.deviceType == 2 && { notification: data }),\n            ...(props.roomData?.oppUserInfo?.deviceType == 3 && { notification: data?.notification, data: data?.data }),\n        };\n\n        const headers_: Types = {\n            'Content-Type': 'application/json',\n            'Authorization': Constants.FcmHeaderAuthorizationKey,\n        }\n        const response: any = await fetch(`https://fcm.googleapis.com/fcm/send`, {\n            method: \"POST\",\n            headers: headers_,\n            body: JSON.stringify(newData)\n        });\n        // const res: any = await response.json();\n        if (response.status === 200) {\n            console.log('Chat push notification send to opposite user: success');\n        } else {\n            console.log('Chat push notification send to opposite user: failure');\n        }\n    }\n\n    const handleUpload = async (e: any) => {\n        let maxFileSize: number = 10;\n        const formData = new FormData();\n        const newFile = e.target.files[0];\n        var fileType = (newFile?.type?.split('/')[1])?.toLowerCase();\n\n        var selectedFileSize = newFile?.size / 1024 / 1024; // size in mb\n        if ([\"mp4\", \"wmv\", \"avi\"].includes(fileType)) {\n            maxFileSize = 20;\n        }\n        if (docTypes.indexOf(fileType) < 0 || (selectedFileSize > maxFileSize)) {\n            setShowToast(true, \"The file must be in proper format or size\")\n            return;\n        }\n\n        formData.append('file', newFile);\n        setIsDocUploading(true);\n        let check_type: any = [\"jpeg\", \"jpg\", \"png\"].includes(fileType) ? 1 : [\"mp4\", \"wmv\", \"avi\"].includes(fileType) ? 2 : null;\n        const res = await onFileUpload(formData);\n        if (res.success && res.imgUrl) {\n            if (check_type === 1) {\n                sendImageVideoMsg(res.imgUrl, \"image\");\n            } else if (check_type === 2) {\n                sendImageVideoMsg(res.imgUrl, \"video\");\n            } else {\n                setShowToast(true, \"There is some technical issue\");\n            }\n            setIsDocUploading(false);\n            // setLocalFiles((prev: any) => ({ ...prev, [filesUrl?.length]: URL.createObjectURL(newFile) }));\n        }\n    }\n\n    const renderTextMsg = (msg: any) => {\n        let curDate = formatDateTime(msg.messageTimestamp, 'day');\n        const messageClass = msg.senderId === userId ? 'message' : 'message recive_msg';\n        if (lastDate === '' || lastDate !== curDate) {\n            lastDate = curDate;\n            return (\n                <>\n                    <div className=\"date_time\">\n                        <span>{curDate}</span>\n                    </div>\n                    <div className={`${messageClass}`}>\n                        <p className={`${msg.senderId === userId ? 'mark' : ''}`}>{msg.messageText}\n                            <span className=\"time\">{formatDateTime(msg.messageTimestamp, \"time\")}</span>\n                        </p>\n                    </div>\n                </>\n            )\n        } else\n            return (\n                <div className={`${messageClass}`}>\n                    <p className={`${msg.senderId === userId ? 'mark' : ''}`}>{msg.messageText}\n                        <span className=\"time\">{formatDateTime(msg.messageTimestamp, \"time\")}</span>\n                    </p>\n                </div>\n            )\n    }\n\n    const renderImageMsg = (msg: any, index: number) => {\n        let curDate = formatDateTime(msg.messageTimestamp, 'day');\n        const messageClass = msg.senderId === userId ? 'message' : 'message recive_msg';\n        if (lastDate === '' || lastDate !== curDate) {\n            lastDate = curDate;\n            return (\n                <>\n                    <div className=\"date_time\">\n                        <span>{curDate}</span>\n                    </div>\n                    <div className={`${messageClass}`}>\n                        <figure className=\"media\">\n                            <img src={msg.mediaUrl || notFound} alt=\"media\"\n                                async-src={msg.mediaUrl || notFound}\n                                decoding=\"async\"\n                                loading=\"lazy\"\n                                onError={(e: any) => {\n                                    if (e?.target?.onerror) {\n                                        e.target.onerror = null;\n                                    }\n                                    if (e?.target?.src) {\n                                        e.target.src = notFound;\n                                    }\n                                }}\n                                onClick={() => {\n                                    setToggler((prev: any) => !prev);\n                                    setSelectSlide(fsSlideListner[`${index}`]);\n                                }} />\n                            <span className=\"time\">{formatDateTime(msg.messageTimestamp, \"time\")}</span>\n                        </figure>\n                    </div>\n                </>\n            )\n        } else\n            return (\n                <div className={`${messageClass}`}>\n                    <figure className=\"media\">\n                        <img src={msg.mediaUrl || notFound} alt=\"media\"\n                            async-src={msg.mediaUrl || notFound}\n                            decoding=\"async\"\n                            loading=\"lazy\"\n                            onError={(e: any) => {\n                                if (e?.target?.onerror) {\n                                    e.target.onerror = null;\n                                }\n                                if (e?.target?.src) {\n                                    e.target.src = notFound;\n                                }\n                            }}\n                            onClick={() => {\n                                setToggler((prev: any) => !prev);\n                                setSelectSlide(fsSlideListner[`${index}`]);\n                            }} />\n                        <span className=\"time\">{formatDateTime(msg.messageTimestamp, \"time\")}</span>\n                    </figure>\n                </div>\n            )\n    }\n\n    const renderVideoMsg = (msg: any, index: number) => {\n        let curDate = formatDateTime(msg.messageTimestamp, 'day');\n        const messageClass = msg.senderId === userId ? 'message' : 'message recive_msg';\n        if (lastDate === '' || lastDate !== curDate) {\n            lastDate = curDate;\n            return (\n                <>\n                    <div className=\"date_time\">\n                        <span>{curDate}</span>\n                    </div>\n                    <div className={`${messageClass}`}>\n                        <figure className=\"media media_video \">\n                            <video src={msg.mediaUrl || notFound}\n                                poster={chatVideoIcon}\n                                onClick={() => {\n                                    setToggler((prev: any) => !prev);\n                                    setSelectSlide(fsSlideListner[`${index}`]);\n                                }}\n                            />\n                            <span className=\"time\">{formatDateTime(msg.messageTimestamp, \"time\")}</span>\n                        </figure>\n                    </div>\n                </>\n            )\n        } else\n            return (\n                <div className={`${messageClass}`}>\n                    <figure className=\"media media_video \">\n                        <video src={msg.mediaUrl || notFound}\n                            poster={chatVideoIcon}\n                            onClick={() => {\n                                setToggler((prev: any) => !prev);\n                                setSelectSlide(fsSlideListner[`${index}`]);\n                            }}\n                        />\n                        <span className=\"time\">{formatDateTime(msg.messageTimestamp, \"time\")}</span>\n                    </figure>\n                </div>\n            )\n    }\n\n    const displayMessages = (msg: any, index: number) => {\n        if (index === 0) lastDate = '';\n        switch (msg.messageType) {\n            case \"text\":\n                return renderTextMsg(msg);\n            case \"image\":\n                return renderImageMsg(msg, index);\n            case \"video\":\n                return renderVideoMsg(msg, index);\n        }\n    }\n\n    const { sources, types } = renderMediaItems(itemsMedia);\n\n    return (props.isNoRecords ? (\n        <div className=\"detail_col\">\n            <div className=\"flex_row\">\n                {/* <div>No Record Found</div> */}\n                <div></div>\n            </div>\n        </div>\n    ) : (\n        <>\n            <FsLightbox\n                toggler={toggler}\n                slide={selectedSlide}\n                sources={sources}\n                types={types}\n                key={sources?.length}\n                // disableLocalStorage={true}\n                onClose={() => {\n                    setSelectSlide(1)\n                }}\n            />\n            <div className=\"detail_col\">\n                <div className=\"flex_row\">\n\n\n                    <div className={`chat_col ${toggle ? 'active' : ''}`}>\n                        <div className=\"chat_user\">\n                            <figure className=\"u_img\">\n                                <img\n                                    src={props.roomData?.oppUserInfo?.image || dummy}\n                                    alt=\"user-img\"\n                                    onError={(e: any) => {\n                                        if (e?.target?.onerror) {\n                                            e.target.onerror = null;\n                                        }\n                                        if (e?.target?.src) {\n                                            e.target.src = dummy;\n                                        }\n                                    }}\n                                />\n                            </figure>\n                            <span className=\"name\"\n                                onClick={() => {\n                                    if (storageService.getItem('userType') === 2) {\n                                        props.history.push(`/tradie-info?tradeId=${props.roomData?.oppUserInfo?.userId}&hideInvite=true`);\n                                    } else {\n                                        props.history.push(`/builder-info?builderId=${props.roomData?.oppUserInfo?.userId}`);\n                                    }\n                                }}>{props.roomData?.oppUserInfo?.name}</span>\n                            {!toggle && <span\n                                onClick={() => {\n                                    setToggle(true);\n                                    if (currentJobDetails) return;\n                                    fetchJobDetail(props.roomData?.jobId);\n                                }}\n                                className=\"view_detail\">View Job Details\n                                <img src={viewMore} alt=\"view-more\" />\n                            </span>}\n                        </div>\n                        <div className=\"message_wrapr\" ref={divRref}>\n                            {messages.length > 0 && messages.map((msg: any, index: number) => {\n                                return (\n                                    displayMessages(msg, index)\n                                )\n                            })}\n                            <div className=\"date_time\">\n                                {props.roomData?.oppUserInfo?.isBlock && < i style={{ color: '#929292' }}>{'You can no longer chat with the user'}</i>}\n                            </div>\n                        </div>\n\n                        {!props.roomData?.oppUserInfo?.isBlock && <div className=\"send_msg\">\n                            <div className=\"text_field\">\n                                <label className=\"upload_item\" htmlFor=\"upload_item\">\n                                    <span className=\"detect_icon_ltr\">\n                                        <img src={sendMedia} alt=\"media\" />\n                                    </span>\n                                </label>\n                                <input\n                                    id=\"upload_item\"\n                                    className=\"hide\"\n                                    type=\"file\"\n                                    accept=\"image/png,image/jpg,image/jpeg, video/mp4, video/wmv, video/avi\"\n                                    onChange={handleUpload}\n                                    disabled={isDocUploading}\n                                />\n                                <textarea placeholder=\"Message..\"\n                                    onKeyDown={handleKeyDown}\n                                    value={messageText} onChange={(e) => setMessageText(e.target.value)} />\n                                <span className=\"detect_icon\">\n                                    <img src={sendBtn} alt=\"send\" onClick={sendMessage} />\n                                </span>\n                            </div>\n                        </div>}\n                    </div>\n\n                    {(toggle && jobDetailLoader) ? (\n                        <div className=\"view_detail_col\">\n                            <div className=\"no_record\">\n                                <figure>\n                                    <img src={loader} alt=\"loader\" width=\"130px\" />\n                                </figure>\n                            </div>\n                        </div>\n                    ) : toggle ? (\n                        <div className=\"view_detail_col\">\n                            <div className=\"f_spacebw relative\">\n                                <span className=\"title line-2 pr-20\">{currentJobDetails?.jobName}</span>\n                                <span\n                                    onClick={() => {\n                                        setToggle((prev) => !prev)\n                                    }}\n                                    className=\"close\">\n                                    <img src={close} alt=\"close\" />\n                                </span>\n                            </div>\n\n                            <div className=\"job_info\">\n                                <ul>\n                                    <li className=\"icon clock\">{renderTime(currentJobDetails?.fromDate, currentJobDetails?.toDate)}</li>\n                                    <li className=\"icon dollar\">{currentJobDetails?.amount}</li>\n                                    <li className=\"icon location line-1\">{currentJobDetails?.locationName}</li>\n                                    <li className=\"icon calendar\">{currentJobDetails?.duration}</li>\n                                </ul>\n                            </div>\n\n                            <p className=\"commn_para\">\n                                {currentJobDetails?.jobDescription}\n                            </p>\n\n                            <button className=\"fill_btn full_btn btn-effect\"\n                                onClick={() => {\n                                    if (storageService.getItem('userType') === 1) {\n                                        props.history.push(`/job-details-page?jobId=${currentJobDetails?.jobId}&redirect_from=jobs`);\n                                    } else {\n                                        // let urlEncode: any = window.btoa(`?jobId=${currentJobDetails?.jobId}&status=${currentJobDetails?.status}&edit=true&activeType=active`)\n                                        let urlEncode: any = `?jobId=${currentJobDetails?.jobId}&status=${currentJobDetails?.status}&edit=true&activeType=active`\n                                        props.history.push(`/job-detail?${urlEncode}`);\n                                    }\n                                }}>View Job details</button>\n                        </div>\n                    ) : null}\n                </div>\n            </div >\n        </>)\n    )\n}\n\nexport default UserMessages;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACWSURBVHgB7ZTBDYAgDEWLejBOgZvIGE6oW+gmMoYXxdZwMF7kkxA88C4EQvtIKRAVcqOQzZ2ZNwk4nDP7OtqQmIpwdK3U0g6TDtkMCU4+uSOyiAQqkSBJK07OgZqn9qtcsACVRAkQSbQgVNK8g3wrasK5L57H/rkY06YQyUv0z0tO2qZJHxqaXIC6CE0OCzwW+a4L+bkA+mx0ERNXUvgAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAABXUExURUdwTP///////////////////////////////////////wtBqODn9KC13YWg1GaIyWaJyEhwvsLP6RpNrSlZs/Dz+tHb73aUzld8xLPD5DlkubLD5Fd9wl7Mg6UAAAAKdFJOUwDfn6C/cIAcc+/XmZsvAAABPklEQVQ4y5WV7ZpFIBSFOSc87b7sSmHm/q9zImbihGb9iafXqrVjq6qoriU1fIiSpqtSdQQu9U7QhsKNaLNzLTyo3fzgUatnR59BuuzzBQUiwRCK1JXsMOYhZSCpDlEGqaTQbvgE6+pwq2bhv9EyM+P6RDJ1BO02xfUkPc6GWZcH2WnRQdgMOMiRqVQiWLMMqFAeZT3onCNzp6TcwIQ5kO8AzmIdGYjxDrR+MjqCXt6AS4BRxIt1vHQMxTY8gqgvQD2GKe77JRdXDIzLg94IYcRWVdOz5ARSUCMGU2eXANqi5syZ3Fkz42MYqya0X8se9ZwFp72OPcphDSMR7lL/ngwzvAh06cuUgKjEUajSF/evNYXyHSUTQ1r+cbVlYFPeAMrWfv2nSRW3vfJGWt6awz7fNxU8/RcakrGtSbtjP7Y8P8bN8RBFAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYBAMAAAASWSDLAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAnUExURUdwTAtBqApBqApBqAtApwpApwtBqApBqAhApxBAnwlApwtApwtBqA/NXNUAAAAMdFJOUwDBf99gQO+hIBBwkA7bl6QAAACoSURBVBjTY2CAA1ZhBHtSzkE4O/BYzhEok1Pt4OozBlDlMtkBOsoFUOVSE5gO+TRAlG9lYNBREIQoX8nAwHSI4whEOQNIgh2o30ZqAgNIgoEZqN/5eANYggGs3/l4AEiCQRBssPPBAKAEB9R+54NACXao/QzOAgxg/RDXHGWA6AcDQZh+EIgJgOkHAmYBuH4GBpajcP1AYIjQDzQrEcFmYDuCxOEC6wcA6NUlu1h0PO0AAAAASUVORK5CYII=\"","import React, { useState, useEffect } from 'react';\n\nimport dummy from '../../assets/images/u_placeholder.jpg';\nimport chatSearch from '../../assets/images/search-chat.png';\nimport menu from '../../assets/images/menu-line-blue.png';\nimport close from '../../assets/images/ic-cancel-blue.png';\n\nimport { setLoading } from '../../redux/common/actions';\nimport { formatDateTime } from '../../utils/common';\nimport noData from '../../assets/images/no-search-data.png';\n\nimport {\n    auth,\n    createRoom,\n    checkRoomExist,\n    getFirebaseInboxData,\n    stopListeningOfRoom,\n    resetUnreadCounter,\n} from '../../services/firebase';\n\nimport UserMessages from './userMessages';\n\ninterface PropTypes {\n    builderProfile: any,\n    tradieProfileData: any,\n    isLoading: boolean,\n    history: any,\n}\n\nlet selectedRoomID = '';\nlet isFreshChatRoute: boolean = false;\n\nconst Chat = (props: PropTypes) => {\n    const [initializing, setInitializing] = useState<boolean>(true);\n    // firebase authenticated user details\n    const [user, setUser] = useState<any>(() => auth.currentUser);\n    const [inBoxData, setInBoxData] = useState<any>([]);\n    const [filterInBoxData, setFilterInBoxData] = useState<any>([]);\n    const [isNoRecords, setIsNoRecords] = useState<boolean>(false);\n    const [roomData, setRoomData] = useState<any>({});\n    const [roomId, setRoomId] = useState<string>('');\n    const [searchQuery, setSearchQuery] = useState('');\n    const [searchActive, setSearchActive] = useState(false);\n    const [isInitialLoader, setIsInitialLoader] = useState(true);\n    const [isMobInbox, setIsMobInbox] = useState<boolean>(false);\n\n    const { tradieId, builderId, jobName, jobId } = props.history?.location?.state ? props.history?.location?.state : { tradieId: '', builderId: '', jobName: '', jobId: '' };\n    console.log('tradieId, builderId, jobName, jobId: ', tradieId, builderId, jobName, jobId);\n\n    useEffect(() => {\n        console.log(\"roomId:: from didmout\", selectedRoomID);\n        (async () => {\n            setLoading(true);\n            if (tradieId && builderId && jobName && jobId) {\n                await setInitialItems();\n            } else {\n                isFreshChatRoute = true;\n            }\n            await getFirebaseInboxData(onUpdateofInbox);\n            // debugger;\n        })();\n\n        return () => {\n            // debugger;\n            stopListeningOfRoom(selectedRoomID);\n            selectedRoomID = '';\n        }\n    }, []);\n\n    const setInitialItems = async () => {\n        const roomID: string = `${jobId}_${tradieId}_${builderId}`;\n        selectedRoomID = roomID;\n        if (await checkRoomExist(roomID)) {\n            console.log('RoomAlreadyExist: =================>');\n            return;\n        } else {\n            await createRoom(jobId, tradieId, builderId, jobName);\n            console.log('NewRoomCreated: ============>');\n        }\n    }\n\n    const onUpdateofInbox = async (res: any) => {\n        console.log(\"roomId::\", selectedRoomID);\n        let selectedRoomInfo: any = '';\n        const sortedRes = res.filter((item: any, index: number) => {\n            if (item.hasOwnProperty('lastMsg') || item.roomId === selectedRoomID) {\n                if (item.roomId === selectedRoomID && !isFreshChatRoute) {\n                    selectedRoomInfo = item;\n                } else {\n                    return item;\n                }\n            }\n        });\n\n        sortedRes?.sort(function (x: any, y: any) {\n            return y.lastMsg?.messageTimestamp - x.lastMsg?.messageTimestamp;\n        });\n\n        if (sortedRes.length === 0 && !selectedRoomInfo) {\n            setIsNoRecords(true);\n            if (isInitialLoader) {\n                setIsInitialLoader(false);\n                setLoading(false);\n            }\n            return;\n        }\n        setIsNoRecords(false);\n\n        let ress: any;\n        if (selectedRoomInfo) {\n            ress = [...sortedRes];\n            ress.unshift(selectedRoomInfo);\n        }\n        console.log('ress: ', ress, \"sortedRes\", sortedRes, \"res\", res, \"selectedRoomInfo\", selectedRoomInfo);\n        const newRes = (Array.isArray(ress) && selectedRoomInfo) ? ress : sortedRes;\n        setInBoxData(newRes.length === 0 ? [{ 'firstKey': 'emptyRes' }] : newRes);\n        if (newRes.length > 0 && selectedRoomID === '') {\n            selectedRoomID = newRes[0].roomId;\n            setRoomId(newRes[0].roomId);\n            if (newRes[0] && newRes[0]?.unreadMessages > 0) {\n                newRes[0].unreadMessages = 0;\n                resetUnreadCounter(newRes[0].roomId);\n            }\n            setRoomData(newRes[0]);\n            return;\n            // fetchJobDetail(res[0].item?.jobId);\n        }\n\n        if (newRes.length > 0) {\n            let itemObj = newRes.find((x: any) => x.roomId == selectedRoomID);\n\n            if (itemObj && itemObj?.unreadMessages > 0) {\n                itemObj.unreadMessages = 0;\n                resetUnreadCounter(itemObj.roomId);\n            }\n            setRoomData(itemObj);\n        }\n    }\n\n    console.log('user: ', user);\n\n    useEffect(() => {\n        let unsubscribe = auth.onAuthStateChanged(user => {\n            if (user) {\n                setUser(user);\n                setIsMobInbox(false);\n            } else {\n                setUser(false);\n                setIsMobInbox(true);\n                setLoading(false);\n                setIsInitialLoader(false);\n            }\n            if (initializing) {\n                setInitializing(false);\n            }\n        });\n\n        return unsubscribe;\n    }, [initializing]);\n\n    console.log(props.history, \"history\", roomId, \"roomId\", roomData, \"roomData\", selectedRoomID, \"selectedRoomID\", inBoxData, 'inBoxData');\n\n    const getRoomDetails = async (item: any) => {\n        stopListeningOfRoom(selectedRoomID);\n        selectedRoomID = item.roomId;\n        setRoomId(item.roomId);\n        setRoomData(item);\n        resetUnreadCounter(item.roomId);\n        // fetchEquipmentDetail(item.itemId);\n    }\n\n    useEffect(() => {\n        if (searchQuery) {\n            let filteredVal = inBoxData.filter((item: any) => item.oppUserInfo?.name?.toLowerCase()?.includes(searchQuery.toLowerCase()));\n            setFilterInBoxData(filteredVal);\n        }\n        if ((inBoxData.length || inBoxData[0]?.['firstKey'] === 'emptyRes') && isInitialLoader) {\n            if (inBoxData[0]?.['firstKey'] === 'emptyRes') setInBoxData([]);\n            setLoading(false);\n            setIsInitialLoader(false);\n        }\n    }, [searchQuery, inBoxData]);\n\n    return (\n        <div className=\"app_wrapper\">\n            <div className=\"custom_container\">\n                <span className=\"mob_side_nav\" onClick={() => setIsMobInbox(true)}>\n                    <img src={menu} alt=\"mob-side-nav\" />\n                </span>\n                <div className=\"f_row chat_wrapr\">\n                    <div className={`side_nav_col ${isMobInbox ? 'active' : ''}`}>\n                        <button className=\"close_nav\" onClick={() => setIsMobInbox(false)}>\n                            <img src={close} alt=\"close\" />\n                        </button>\n                        <div className=\"stick\">\n                            <span className=\"title\">Chat</span>\n                            <div className={`search_bar ${searchActive ? 'active' : ''}`} onClick={() => { setSearchActive(true) }}>\n                                <input type=\"text\" placeholder=\"Search\" value={searchQuery} onChange={(e: any) => setSearchQuery(e.target.value.trimLeft())} />\n                                <span className=\"detect_icon_ltr\">\n                                    <img src={chatSearch} alt=\"search\" />\n                                </span>\n                            </div>\n                            <ul className=\"chat_list\">\n                                {searchQuery ? filterInBoxData.length === 0 ? (\n                                    <li>\n                                        <a href=\"javascript:void(0)\" className=\"chat\">\n                                            <div className=\"detail\">\n                                                <span className=\"inner_title line-1\">No Record Found</span>\n                                            </div>\n                                        </a>\n                                    </li>\n                                ) : filterInBoxData.map((item: any) => {\n                                    return (\n                                        <li onClick={() => { getRoomDetails(item) }}>\n                                            <a href=\"javascript:void(0)\" className={`chat ${selectedRoomID === item.roomId ? 'active' : ''}`}>\n                                                <figure className=\"u_img\">\n                                                    <img\n                                                        src={item.oppUserInfo?.image || dummy}\n                                                        alt=\"img\"\n                                                        onError={(e: any) => {\n                                                            if (e?.target?.onerror) {\n                                                                e.target.onerror = null;\n                                                            }\n                                                            if (e?.target?.src) {\n                                                                e.target.src = dummy;\n                                                            }\n                                                        }}\n                                                    />\n                                                </figure>\n                                                <div className=\"detail\">\n                                                    <span className=\"inner_title line-1\">{item.oppUserInfo?.name}</span>\n                                                    <span className=\"inner_title job line-1\">{item.jobName}</span>\n                                                    <p className=\"commn_para line-1\">{item.lastMsg?.messageText}</p>\n                                                    {item.lastMsg?.messageTimestamp && <span className=\"date_time\">{formatDateTime(item.lastMsg?.messageTimestamp, 'inboxTime')}</span>}\n                                                    {(selectedRoomID === item.roomId) ? null : item.unreadMessages === 0 ? null : <span className=\"count\">{item.unreadMessages}</span>}\n                                                </div>\n                                            </a>\n                                        </li>\n                                    )\n                                }) : inBoxData?.length > 0 ? inBoxData.map((item: any) => {\n                                    return (\n                                        <li onClick={() => { getRoomDetails(item) }}>\n                                            <a href=\"javascript:void(0)\" className={`chat ${selectedRoomID === item.roomId ? 'active' : ''}`}>\n                                                <figure className=\"u_img\">\n                                                    <img\n                                                        src={item.oppUserInfo?.image || dummy}\n                                                        alt=\"img\"\n                                                        onError={(e: any) => {\n                                                            if (e?.target?.onerror) {\n                                                                e.target.onerror = null;\n                                                            }\n                                                            if (e?.target?.src) {\n                                                                e.target.src = dummy;\n                                                            }\n                                                        }}\n                                                    />\n                                                </figure>\n                                                <div className=\"detail\">\n                                                    <span className=\"inner_title line-1\">{item.oppUserInfo?.name}</span>\n                                                    <span className=\"inner_title job line-1\">{item.jobName}</span>\n                                                    <p className=\"commn_para line-1\">{item.lastMsg?.messageType === 'text' ? item.lastMsg?.messageText : item.lastMsg?.messageType === 'image' ? <i style={{ color: '#929292' }}>Photo</i> : item.lastMsg?.messageType === 'video' ? <i style={{ color: '#929292' }}>Video</i> : ''}</p>\n                                                    {item.lastMsg?.messageTimestamp && <span className=\"date_time\">{formatDateTime(item.lastMsg?.messageTimestamp, 'inboxTime')}</span>}\n                                                    {(selectedRoomID === item.roomId) ? null : item.unreadMessages === 0 ? null : <span className=\"count\">{item.unreadMessages}</span>}\n                                                </div>\n                                            </a>\n                                        </li>\n                                    )\n                                }) : props.isLoading ? null : (\n                                    <li>\n                                        <a href=\"javascript:void(0)\" className=\"chat\">\n                                            <div className=\"detail\">\n                                                <span className=\"inner_title line-1\">No Record Found</span>\n                                            </div>\n                                        </a>\n                                    </li>\n                                )}\n                            </ul>\n                        </div>\n                    </div>\n                    {/* {(isInitialLoader || inBoxData?.length === 0) ? null : */}\n                    {isInitialLoader ? null :\n                        (!isInitialLoader && inBoxData?.length === 0) ?\n                            <div className=\"detail_col\">\n                                <div className=\"flex_row tradies_row\">\n                                    <div className=\"no_record\">\n                                        <figure className=\"no_img\">\n                                            <img src={noData} alt=\"data not found\" />\n                                        </figure>\n                                        <span>No Data Found</span>\n                                    </div>\n                                </div>\n                            </div> :\n                            <UserMessages\n                                roomId={selectedRoomID}\n                                roomData={roomData}\n                                isNoRecords={isNoRecords}\n                                history={props.history}\n                                isLoading={props.isLoading}\n                                inBoxData={inBoxData}\n                                setInBoxData={setInBoxData}\n                            />\n                    }\n                </div>\n            </div>\n        </div >\n    )\n}\n\nexport default Chat;","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAMAAADyHTlpAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAABUUExURUdwTPLy8vHx8e/v7/Hx8e/v7+/v7+/v7+/v7/Dw8PPz8/Hx8e/v7/////n5+fPz9BIOJIiGkU1KW3FufMnIzSAdMeLh5C8sP1xZaJeVnz47TaalreepWhcAAAANdFJOUwC/32CaEIBAJHB/71CwYgcnAAABbklEQVQ4y52V25aDIAxFRUShKkFQ8fL//znQWg0otp08qEv3OhwDSbIsCsapKEvRVNl9MEFqkD4AgFCeBCvisHYPhxfXMCsAcW/6Cq7yE/iE85NpAZekF36E5APaZITsHelYgXzeko7d/fJc3qMyZxtafCAdW2yieHmYjdbdmLCARedBWb0oZSJYkljUqKl3t7FTNmLBu6UH2qlue+oHHcn6hJF9/VGZw4nqzw4O0VWhVWPZmuH0Twv6ZIbILM+aA9VYqFORWZoJ+Z2q+69SIiGUtyVOQYnRfs+Vf15PKDLQTnuGRmvbkwGKULDD/NK0KMXbtyY8LKNW1nTGX5GZ94FhdfBmnQY16BnQJm9osLFhhOxzY0XqYAcsUN8qkoWFWXi2DiLTbB9WzE299qHoL2WYsc/FzX9vGb653ZIlblolfEt6Ntk0xf9bsWsd1w2eXU4DB2PajRmSHkmcEjeFXtOoJoJ9mF1V40cc5SfuDwSERuTh1ludAAAAAElFTkSuQmCC\"","import { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport Chat from './chat';\n\nconst mapStateToProps = (state: any) => {\n    return {\n        isLoading: state.common.isLoading,\n        isSkeletonLoading: state.common.isSkeletonLoading,\n    }\n}\n\nconst mapDispatchToProps = (dispatch: any) => {\n    return bindActionCreators({\n    }, dispatch);\n}\n\nconst ChatComponent = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(Chat)\n\nexport default ChatComponent;"],"sourceRoot":""}